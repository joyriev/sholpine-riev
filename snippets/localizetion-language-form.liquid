<div x-data="{ open: false }" class="relative inline-block text-left">
  <button @click="open = !open" class="flex items-center gap-2 px-3 py-2 text-sm font-medium border rounded-lg hover:bg-gray-100">
    <span>{{ localization.language.iso_code | upcase }}</span>
    <svg
      class="w-4 h-4"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  <div
    x-show="open"
    x-cloak
    @click.away="open = false"
    x-transition:enter="transition ease-out duration-100"
    x-transition:enter-start="opacity-0 scale-90"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-90"
    class="absolute right-0 mt-2 w-40 origin-top-right bg-white border border-gray-200 rounded-lg shadow-lg z-50">
    <form
      class="py-1"
      method="post"
      action="/localization"
      accept-charset="UTF-8"
      enctype="multipart/form-data"
      id="localization_form">
      <input
        type="hidden"
        name="form_type"
        value="localization" />
      <input
        type="hidden"
        name="utf8"
        value="âœ“" />
      <input
        type="hidden"
        name="_method"
        value="put" />
      <input
        type="hidden"
        name="return_to"
        value="{{ request.path }}" />
      <ul class="text-sm text-gray-700">
        {% for language in localization.available_languages %}
          <li>
            <button
              type="submit"
              name="locale_code"
              value="{{ language.iso_code }}"
              class="block w-full text-left px-4 py-2 hover:bg-gray-100 {% if language.iso_code == localization.language.iso_code %}font-semibold{% endif %}">
              {{ language.endonym_name | capitalize }}
            </button>
          </li>
        {% endfor %}
      </ul>
    </form>
  </div>
</div>